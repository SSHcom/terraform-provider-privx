---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "privx_api_target Resource - terraform-provider-privx"
subcategory: ""
description: |-
  API target resource (API-Proxy). Defines backend API endpoint(s), allowed request patterns, roles, and target credentials.
---

# privx_api_target (Resource)

API target resource (API-Proxy). Defines backend API endpoint(s), allowed request patterns, roles, and target credentials.

## Example Usage

```terraform
data "privx_role" "existing_role" {
      name = "privx-user"
    }

    resource "privx_api_target" "k8s" {
      name    = "tf-api-target-xbldna"
      comment = "created by acc test"

      roles = [{
        id   = data.privx_role.existing_role.id
        name = data.privx_role.existing_role.name
      }]

      authorized_endpoints = [{
        host      = "kubernetes.example.com:6443"
        protocols = ["*"]
        methods   = ["*"]
        paths     = ["**"]
      }]

      target_credential = {
        type         = "token"
        bearer_token = "<KUBERNETES_API_TARGET_TOKEN>"
      }

      tls_trust_anchors = file("/tmp/trust-anchor.pem")

      tls_insecure_skip_verify = false
    }
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authorized_endpoints` (Attributes List) Authorized endpoint patterns. A request must match at least one authorized endpoint. (see [below for nested schema](#nestedatt--authorized_endpoints))
- `name` (String) Unique name of the API target
- `target_credential` (Attributes) (see [below for nested schema](#nestedatt--target_credential))

### Optional

- `access_group_id` (String) Optional access group ID
- `audit_enabled` (Boolean) Whether to session record requests to this target API
- `comment` (String) Optional comment
- `disabled` (String) Disabled state. Can be one of NOT_DISABLED, BY_ADMIN, BY_LICENSE. If not set, server decides.
- `roles` (Attributes Set) Roles which grant access to the API target (see [below for nested schema](#nestedatt--roles))
- `tags` (Set of String) Optional tags
- `tls_insecure_skip_verify` (Boolean) Skip TLS server certificate verification when connecting to API target
- `tls_trust_anchors` (String, Sensitive) Optional PEM trust anchors used for validating target TLS certificates
- `unauthorized_endpoints` (Attributes List) Unauthorized endpoint patterns. An authorized request must not match any unauthorized endpoint. (see [below for nested schema](#nestedatt--unauthorized_endpoints))

### Read-Only

- `author` (String)
- `created` (String)
- `id` (String) ID of the API target
- `updated` (String)
- `updated_by` (String)

<a id="nestedatt--authorized_endpoints"></a>
### Nested Schema for `authorized_endpoints`

Required:

- `host` (String) Host (optionally with port) matched against request URL host

Optional:

- `allow_unauthenticated` (Boolean) Allow unauthenticated requests for this endpoint pattern
- `methods` (Set of String) HTTP methods matched: "GET", "POST", ..., or "*"
- `nat_target_host` (String) Optional NAT target host when forwarding over an extender
- `paths` (Set of String) Paths matched; supports "*" and "**" wildcards
- `protocols` (Set of String) Protocols matched against scheme: "http", "https", or "*"


<a id="nestedatt--target_credential"></a>
### Nested Schema for `target_credential`

Required:

- `type` (String) Credential type (lowercase in Terraform): "token", "basic_auth", "certificate".

Optional:

- `basic_auth_password` (String, Sensitive)
- `basic_auth_username` (String)
- `bearer_token` (String, Sensitive)
- `certificate` (String, Sensitive)
- `private_key` (String, Sensitive)


<a id="nestedatt--roles"></a>
### Nested Schema for `roles`

Required:

- `id` (String) Role ID

Optional:

- `name` (String) Role name (computed from server). If server omits, provider preserves prior/planned name when present.


<a id="nestedatt--unauthorized_endpoints"></a>
### Nested Schema for `unauthorized_endpoints`

Required:

- `host` (String) Host (optionally with port) matched against request URL host

Optional:

- `allow_unauthenticated` (Boolean) Allow unauthenticated requests for this endpoint pattern
- `methods` (Set of String) HTTP methods matched: "GET", "POST", ..., or "*"
- `nat_target_host` (String) Optional NAT target host when forwarding over an extender
- `paths` (Set of String) Paths matched; supports "*" and "**" wildcards
- `protocols` (Set of String) Protocols matched against scheme: "http", "https", or "*"
